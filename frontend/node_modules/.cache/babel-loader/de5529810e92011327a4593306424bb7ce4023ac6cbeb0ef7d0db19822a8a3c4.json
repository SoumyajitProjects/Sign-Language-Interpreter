{"ast":null,"code":"var _jsxFileName = \"/Users/soumy/sign-language-detector/frontend/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Webcam from 'react-webcam';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [detectionResult, setDetectionResult] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const wsRef = useRef(null);\n  const animationRef = useRef(null);\n  useEffect(() => {\n    connectWebSocket();\n\n    // Initialize canvas when component mounts\n    if (canvasRef.current) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n\n    // Set up periodic canvas clearing to prevent stuck landmarks\n    const canvasClearInterval = setInterval(() => {\n      if (!isDetecting) {\n        clearCanvas();\n      }\n    }, 1000); // Clear every second when not detecting\n\n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n      clearInterval(canvasClearInterval);\n    };\n  }, [isDetecting]);\n  const connectWebSocket = () => {\n    const ws = new WebSocket('ws://localhost:8001/ws/detection');\n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      setIsConnected(true);\n    };\n    ws.onmessage = event => {\n      try {\n        const data = JSON.parse(event.data);\n        if (data.type === 'detection_result') {\n          setDetectionResult(data);\n\n          // Always clear canvas first\n          clearCanvas();\n\n          // Only draw if hands are detected and landmarks exist\n          if (data.hands_detected && data.landmarks && data.landmarks.length > 0) {\n            drawLandmarks(data.landmarks, data.phrase);\n          }\n          // If no hands detected, canvas stays cleared\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n        // Clear canvas on error too\n        clearCanvas();\n      }\n    };\n    ws.onerror = error => {\n      console.error('WebSocket error:', error);\n      setIsConnected(false);\n    };\n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n      setIsConnected(false);\n      // Try to reconnect after a delay\n      setTimeout(() => {\n        if (isDetecting) {\n          connectWebSocket();\n        }\n      }, 2000);\n    };\n    wsRef.current = ws;\n  };\n  const drawLandmarks = (landmarks, phrase = null) => {\n    if (!canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const video = webcamRef.current.video;\n    if (!video) {\n      // If no video, still clear the canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      return;\n    }\n\n    // Set canvas size to match video\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n\n    // Clear canvas completely - use the full canvas dimensions\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Only draw landmarks if they exist and are valid\n    if (landmarks && landmarks.length > 0) {\n      // Draw landmarks\n      landmarks.forEach((landmark, index) => {\n        if (landmark && typeof landmark.x === 'number' && typeof landmark.y === 'number') {\n          const x = landmark.x * canvas.width;\n          const y = landmark.y * canvas.height;\n\n          // Draw landmark point\n          ctx.beginPath();\n          ctx.arc(x, y, 4, 0, 2 * Math.PI);\n          ctx.fillStyle = '#FF0000'; // Red color\n          ctx.fill();\n\n          // Draw landmark number (only for key points to reduce clutter)\n          if (index === 4 || index === 8 || index === 12 || index === 16 || index === 20) {\n            ctx.fillStyle = '#FFFFFF';\n            ctx.font = '10px Arial';\n            ctx.fillText(index.toString(), x + 6, y - 6);\n          }\n        }\n      });\n\n      // Draw connections between landmarks\n      const connections = [[0, 1], [1, 2], [2, 3], [3, 4],\n      // Thumb\n      [0, 5], [5, 6], [6, 7], [7, 8],\n      // Index finger\n      [0, 9], [9, 10], [10, 11], [11, 12],\n      // Middle finger\n      [0, 13], [13, 14], [14, 15], [15, 16],\n      // Ring finger\n      [0, 17], [17, 18], [18, 19], [19, 20],\n      // Pinky\n      [0, 5], [5, 9], [9, 13], [13, 17] // Palm connections\n      ];\n      ctx.strokeStyle = '#00FF00'; // Green color\n      ctx.lineWidth = 2;\n      connections.forEach(([start, end]) => {\n        if (landmarks[start] && landmarks[end] && typeof landmarks[start].x === 'number' && typeof landmarks[start].y === 'number' && typeof landmarks[end].x === 'number' && typeof landmarks[end].y === 'number') {\n          const startX = landmarks[start].x * canvas.width;\n          const startY = landmarks[start].y * canvas.height;\n          const endX = landmarks[end].x * canvas.width;\n          const endY = landmarks[end].y * canvas.height;\n          ctx.beginPath();\n          ctx.moveTo(startX, startY);\n          ctx.lineTo(endX, endY);\n          ctx.stroke();\n        }\n      });\n    }\n\n    // Draw phrase on camera if detected\n    if (phrase) {\n      // Create a semi-transparent background for the phrase\n      ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n      ctx.fillRect(10, 10, 320, 70);\n\n      // Draw phrase text\n      ctx.fillStyle = '#FF6B6B';\n      ctx.font = 'bold 28px Arial';\n      ctx.textAlign = 'left';\n      ctx.fillText(phrase, 20, 50);\n\n      // Draw a border around the phrase box\n      ctx.strokeStyle = '#FF6B6B';\n      ctx.lineWidth = 3;\n      ctx.strokeRect(10, 10, 320, 70);\n    }\n  };\n  const getAccuracyColor = accuracy => {\n    if (accuracy >= 0.9) return '#00FF00'; // Green\n    if (accuracy >= 0.7) return '#FFFF00'; // Yellow\n    if (accuracy >= 0.5) return '#FFA500'; // Orange\n    return '#FF0000'; // Red\n  };\n  const clearCanvas = () => {\n    if (!canvasRef.current) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n\n    // Clear the entire canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n  const getConfidenceColor = confidence => {\n    if (confidence >= 0.9) return '#00FF00'; // Green\n    if (confidence >= 0.7) return '#FFFF00'; // Yellow\n    if (confidence >= 0.5) return '#FFA500'; // Orange\n    return '#FF0000'; // Red\n  };\n  const toggleDetection = () => {\n    if (isDetecting) {\n      setIsDetecting(false);\n      // Stop animation and clear canvas when stopping detection\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n      clearCanvas();\n    } else {\n      setIsDetecting(true);\n      startDetection();\n    }\n  };\n  const startDetection = () => {\n    if (!isDetecting) return;\n    let lastFrameTime = 0;\n    const frameInterval = 1000 / 15; // 15 FPS for better performance\n\n    const captureFrame = currentTime => {\n      if (!isDetecting) {\n        // Stop the animation loop when detection is disabled\n        if (animationRef.current) {\n          cancelAnimationFrame(animationRef.current);\n          animationRef.current = null;\n        }\n        return;\n      }\n\n      // Limit frame rate to prevent overwhelming the backend\n      if (currentTime - lastFrameTime >= frameInterval) {\n        if (webcamRef.current && wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n          const imageSrc = webcamRef.current.getScreenshot();\n          if (imageSrc) {\n            wsRef.current.send(JSON.stringify({\n              type: 'frame',\n              image: imageSrc\n            }));\n          }\n        }\n        lastFrameTime = currentTime;\n      }\n\n      // Continue the animation loop only if still detecting\n      if (isDetecting) {\n        animationRef.current = requestAnimationFrame(captureFrame);\n      }\n    };\n    animationRef.current = requestAnimationFrame(captureFrame);\n  };\n  useEffect(() => {\n    if (isDetecting) {\n      startDetection();\n    } else {\n      // Clear canvas when detection stops\n      clearCanvas();\n    }\n\n    // Cleanup function to ensure detection stops when component unmounts\n    return () => {\n      if (isDetecting) {\n        setIsDetecting(false);\n        clearCanvas();\n      }\n    };\n  }, [isDetecting]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Sign Language Detection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status\",\n        children: [\"Status: \", isConnected ? '游릭 Connected' : '游댮 Disconnected']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"App-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"camera-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(Webcam, {\n            ref: webcamRef,\n            audio: false,\n            screenshotFormat: \"image/jpeg\",\n            videoConstraints: {\n              width: 640,\n              height: 480,\n              facingMode: 'user'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            className: \"landmarks-canvas\",\n            style: {\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              pointerEvents: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: toggleDetection,\n            className: `detection-btn ${isDetecting ? 'active' : ''}`,\n            children: isDetecting ? 'Stop Detection' : 'Start Detection'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearCanvas,\n            className: \"clear-btn\",\n            style: {\n              marginLeft: '10px'\n            },\n            children: \"Clear Canvas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Detection Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), detectionResult ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Status:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this), \" \", detectionResult.hands_detected ? '游릭 Detecting' : '游댮 No Hands']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this), detectionResult.confidence > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Confidence:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: getConfidenceColor(detectionResult.confidence)\n              },\n              children: [(detectionResult.confidence * 100).toFixed(1), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 17\n          }, this), detectionResult.accuracy > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Accuracy:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: getAccuracyColor(detectionResult.accuracy)\n              },\n              children: [(detectionResult.accuracy * 100).toFixed(1), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Start detection to see real-time results on camera.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"instructions\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Try These Signs:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sign-examples\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"A:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), \" Make a fist\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"B:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this), \" Point with index finger\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"V:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this), \" Peace sign (index + middle)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"W:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), \" Three fingers up\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"5:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this), \" All fingers extended\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"I Love You:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), \" Thumb + index + pinky\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDC4D:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), \" Thumbs up\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83D\\uDC4C:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), \" OK sign (thumb + index circle)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sign-example\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83E\\uDD18:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), \" Rock on (index + pinky)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"bmBpgzcF9IyxNoTKt3IqpJsJA3s=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Webcam","jsxDEV","_jsxDEV","App","_s","webcamRef","canvasRef","isDetecting","setIsDetecting","detectionResult","setDetectionResult","isConnected","setIsConnected","wsRef","animationRef","connectWebSocket","current","canvas","ctx","getContext","clearRect","width","height","canvasClearInterval","setInterval","clearCanvas","close","cancelAnimationFrame","clearInterval","ws","WebSocket","onopen","console","log","onmessage","event","data","JSON","parse","type","hands_detected","landmarks","length","drawLandmarks","phrase","error","onerror","onclose","setTimeout","video","videoWidth","videoHeight","forEach","landmark","index","x","y","beginPath","arc","Math","PI","fillStyle","fill","font","fillText","toString","connections","strokeStyle","lineWidth","start","end","startX","startY","endX","endY","moveTo","lineTo","stroke","fillRect","textAlign","strokeRect","getAccuracyColor","accuracy","getConfidenceColor","confidence","toggleDetection","startDetection","lastFrameTime","frameInterval","captureFrame","currentTime","readyState","OPEN","imageSrc","getScreenshot","send","stringify","image","requestAnimationFrame","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","audio","screenshotFormat","videoConstraints","facingMode","style","position","top","left","pointerEvents","onClick","marginLeft","color","toFixed","_c","$RefreshReg$"],"sources":["/Users/soumy/sign-language-detector/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Webcam from 'react-webcam';\nimport './App.css';\n\nfunction App() {\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [detectionResult, setDetectionResult] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const wsRef = useRef(null);\n  const animationRef = useRef(null);\n\n  useEffect(() => {\n    connectWebSocket();\n    \n    // Initialize canvas when component mounts\n    if (canvasRef.current) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    \n    // Set up periodic canvas clearing to prevent stuck landmarks\n    const canvasClearInterval = setInterval(() => {\n      if (!isDetecting) {\n        clearCanvas();\n      }\n    }, 1000); // Clear every second when not detecting\n    \n    return () => {\n      if (wsRef.current) {\n        wsRef.current.close();\n      }\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n      clearInterval(canvasClearInterval);\n    };\n  }, [isDetecting]);\n\n  const connectWebSocket = () => {\n    const ws = new WebSocket('ws://localhost:8001/ws/detection');\n    \n    ws.onopen = () => {\n      console.log('WebSocket connected');\n      setIsConnected(true);\n    };\n    \n    ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        if (data.type === 'detection_result') {\n          setDetectionResult(data);\n          \n          // Always clear canvas first\n          clearCanvas();\n          \n          // Only draw if hands are detected and landmarks exist\n          if (data.hands_detected && data.landmarks && data.landmarks.length > 0) {\n            drawLandmarks(data.landmarks, data.phrase);\n          }\n          // If no hands detected, canvas stays cleared\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket message:', error);\n        // Clear canvas on error too\n        clearCanvas();\n      }\n    };\n    \n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n      setIsConnected(false);\n    };\n    \n    ws.onclose = () => {\n      console.log('WebSocket disconnected');\n      setIsConnected(false);\n      // Try to reconnect after a delay\n      setTimeout(() => {\n        if (isDetecting) {\n          connectWebSocket();\n        }\n      }, 2000);\n    };\n    \n    wsRef.current = ws;\n  };\n\n  const drawLandmarks = (landmarks, phrase = null) => {\n    if (!canvasRef.current) return;\n    \n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const video = webcamRef.current.video;\n    \n    if (!video) {\n      // If no video, still clear the canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      return;\n    }\n    \n    // Set canvas size to match video\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    \n    // Clear canvas completely - use the full canvas dimensions\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n    // Only draw landmarks if they exist and are valid\n    if (landmarks && landmarks.length > 0) {\n      // Draw landmarks\n      landmarks.forEach((landmark, index) => {\n        if (landmark && typeof landmark.x === 'number' && typeof landmark.y === 'number') {\n          const x = landmark.x * canvas.width;\n          const y = landmark.y * canvas.height;\n          \n          // Draw landmark point\n          ctx.beginPath();\n          ctx.arc(x, y, 4, 0, 2 * Math.PI);\n          ctx.fillStyle = '#FF0000'; // Red color\n          ctx.fill();\n          \n          // Draw landmark number (only for key points to reduce clutter)\n          if (index === 4 || index === 8 || index === 12 || index === 16 || index === 20) {\n            ctx.fillStyle = '#FFFFFF';\n            ctx.font = '10px Arial';\n            ctx.fillText(index.toString(), x + 6, y - 6);\n          }\n        }\n      });\n      \n      // Draw connections between landmarks\n      const connections = [\n        [0, 1], [1, 2], [2, 3], [3, 4], // Thumb\n        [0, 5], [5, 6], [6, 7], [7, 8], // Index finger\n        [0, 9], [9, 10], [10, 11], [11, 12], // Middle finger\n        [0, 13], [13, 14], [14, 15], [15, 16], // Ring finger\n        [0, 17], [17, 18], [18, 19], [19, 20], // Pinky\n        [0, 5], [5, 9], [9, 13], [13, 17] // Palm connections\n      ];\n      \n      ctx.strokeStyle = '#00FF00'; // Green color\n      ctx.lineWidth = 2;\n      \n      connections.forEach(([start, end]) => {\n        if (landmarks[start] && landmarks[end] && \n            typeof landmarks[start].x === 'number' && typeof landmarks[start].y === 'number' &&\n            typeof landmarks[end].x === 'number' && typeof landmarks[end].y === 'number') {\n          const startX = landmarks[start].x * canvas.width;\n          const startY = landmarks[start].y * canvas.height;\n          const endX = landmarks[end].x * canvas.width;\n          const endY = landmarks[end].y * canvas.height;\n          \n          ctx.beginPath();\n          ctx.moveTo(startX, startY);\n          ctx.lineTo(endX, endY);\n          ctx.stroke();\n        }\n      });\n    }\n    \n    // Draw phrase on camera if detected\n    if (phrase) {\n      // Create a semi-transparent background for the phrase\n      ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';\n      ctx.fillRect(10, 10, 320, 70);\n      \n      // Draw phrase text\n      ctx.fillStyle = '#FF6B6B';\n      ctx.font = 'bold 28px Arial';\n      ctx.textAlign = 'left';\n      ctx.fillText(phrase, 20, 50);\n      \n      // Draw a border around the phrase box\n      ctx.strokeStyle = '#FF6B6B';\n      ctx.lineWidth = 3;\n      ctx.strokeRect(10, 10, 320, 70);\n    }\n  };\n\n  const getAccuracyColor = (accuracy) => {\n    if (accuracy >= 0.9) return '#00FF00'; // Green\n    if (accuracy >= 0.7) return '#FFFF00'; // Yellow\n    if (accuracy >= 0.5) return '#FFA500'; // Orange\n    return '#FF0000'; // Red\n  };\n\n  const clearCanvas = () => {\n    if (!canvasRef.current) return;\n    \n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    \n    // Clear the entire canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n\n  const getConfidenceColor = (confidence) => {\n    if (confidence >= 0.9) return '#00FF00'; // Green\n    if (confidence >= 0.7) return '#FFFF00'; // Yellow\n    if (confidence >= 0.5) return '#FFA500'; // Orange\n    return '#FF0000'; // Red\n  };\n\n  const toggleDetection = () => {\n    if (isDetecting) {\n      setIsDetecting(false);\n      // Stop animation and clear canvas when stopping detection\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n        animationRef.current = null;\n      }\n      clearCanvas();\n    } else {\n      setIsDetecting(true);\n      startDetection();\n    }\n  };\n\n  const startDetection = () => {\n    if (!isDetecting) return;\n    \n    let lastFrameTime = 0;\n    const frameInterval = 1000 / 15; // 15 FPS for better performance\n    \n    const captureFrame = (currentTime) => {\n      if (!isDetecting) {\n        // Stop the animation loop when detection is disabled\n        if (animationRef.current) {\n          cancelAnimationFrame(animationRef.current);\n          animationRef.current = null;\n        }\n        return;\n      }\n      \n      // Limit frame rate to prevent overwhelming the backend\n      if (currentTime - lastFrameTime >= frameInterval) {\n        if (webcamRef.current && wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n          const imageSrc = webcamRef.current.getScreenshot();\n          if (imageSrc) {\n            wsRef.current.send(JSON.stringify({\n              type: 'frame',\n              image: imageSrc\n            }));\n          }\n        }\n        lastFrameTime = currentTime;\n      }\n      \n      // Continue the animation loop only if still detecting\n      if (isDetecting) {\n        animationRef.current = requestAnimationFrame(captureFrame);\n      }\n    };\n    \n    animationRef.current = requestAnimationFrame(captureFrame);\n  };\n\n  useEffect(() => {\n    if (isDetecting) {\n      startDetection();\n    } else {\n      // Clear canvas when detection stops\n      clearCanvas();\n    }\n    \n    // Cleanup function to ensure detection stops when component unmounts\n    return () => {\n      if (isDetecting) {\n        setIsDetecting(false);\n        clearCanvas();\n      }\n    };\n  }, [isDetecting]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Sign Language Detection</h1>\n        <div className=\"status\">\n          Status: {isConnected ? '游릭 Connected' : '游댮 Disconnected'}\n        </div>\n      </header>\n      \n      <main className=\"App-main\">\n        <div className=\"camera-container\">\n          <div className=\"video-wrapper\">\n            <Webcam\n              ref={webcamRef}\n              audio={false}\n              screenshotFormat=\"image/jpeg\"\n              videoConstraints={{\n                width: 640,\n                height: 480,\n                facingMode: 'user'\n              }}\n            />\n            <canvas\n              ref={canvasRef}\n              className=\"landmarks-canvas\"\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                pointerEvents: 'none'\n              }}\n            />\n          </div>\n          \n          <div className=\"controls\">\n            <button \n              onClick={toggleDetection}\n              className={`detection-btn ${isDetecting ? 'active' : ''}`}\n            >\n              {isDetecting ? 'Stop Detection' : 'Start Detection'}\n            </button>\n            <button \n              onClick={clearCanvas}\n              className=\"clear-btn\"\n              style={{ marginLeft: '10px' }}\n            >\n              Clear Canvas\n            </button>\n          </div>\n        </div>\n        \n        <div className=\"results\">\n          <h2>Detection Status</h2>\n          {detectionResult ? (\n            <div className=\"result-content\">\n              <div className=\"result-item\">\n                <strong>Status:</strong> {detectionResult.hands_detected ? '游릭 Detecting' : '游댮 No Hands'}\n              </div>\n              \n              {detectionResult.confidence > 0 && (\n                <div className=\"result-item\">\n                  <strong>Confidence:</strong> \n                  <span style={{ color: getConfidenceColor(detectionResult.confidence) }}>\n                    {(detectionResult.confidence * 100).toFixed(1)}%\n                  </span>\n                </div>\n              )}\n              \n              {detectionResult.accuracy > 0 && (\n                <div className=\"result-item\">\n                  <strong>Accuracy:</strong> \n                  <span style={{ color: getAccuracyColor(detectionResult.accuracy) }}>\n                    {(detectionResult.accuracy * 100).toFixed(1)}%\n                  </span>\n                </div>\n              )}\n            </div>\n          ) : (\n            <p>Start detection to see real-time results on camera.</p>\n          )}\n        </div>\n        \n        <div className=\"instructions\">\n          <h3>Try These Signs:</h3>\n          <div className=\"sign-examples\">\n            <div className=\"sign-example\">\n              <strong>A:</strong> Make a fist\n            </div>\n            <div className=\"sign-example\">\n              <strong>B:</strong> Point with index finger\n            </div>\n            <div className=\"sign-example\">\n              <strong>V:</strong> Peace sign (index + middle)\n            </div>\n            <div className=\"sign-example\">\n              <strong>W:</strong> Three fingers up\n            </div>\n            <div className=\"sign-example\">\n              <strong>5:</strong> All fingers extended\n            </div>\n            <div className=\"sign-example\">\n              <strong>I Love You:</strong> Thumb + index + pinky\n            </div>\n            <div className=\"sign-example\">\n              <strong>游녨:</strong> Thumbs up\n            </div>\n            <div className=\"sign-example\">\n              <strong>游녧:</strong> OK sign (thumb + index circle)\n            </div>\n            <div className=\"sign-example\">\n              <strong>游뱆:</strong> Rock on (index + pinky)\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}